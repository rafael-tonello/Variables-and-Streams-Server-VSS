Memory + prefixtree:
    - records at top have higher probability to be changed
    - dump should be done from bottom to top
    - memory release should be done during the dump



    get memory usage: https://stackoverflow.com/questions/669438/how-to-get-memory-usage-at-runtime-using-c

    

#include <iostream>
#include <fstream>
#include <unistd.h>

size_t getCurrentRSS()
{
    long rss_pages = 0;
    std::ifstream statm("/proc/self/statm");
    if (!statm.is_open())
        return 0;

    long dummy;
    statm >> dummy >> rss_pages; // rss is the second field
    statm.close();

    long page_size = sysconf(_SC_PAGESIZE);
    return rss_pages * page_size;
}

int main()
{
    size_t rss = getCurrentRSS();
    std::cout << "Current RSS: " << rss << " bytes (" << rss / 1024.0 / 1024.0 << " MB)" << std::endl;
    return 0;
}
